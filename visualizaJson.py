import json
import re
import ast

def limpar_texto_duplicado(texto: str) -> str:
    """
    Remove padrões de texto duplicado e outros artefatos de limpeza.
    Ex: 'abc abc' se torna 'abc'. Também remove ';' desnecessários.
    """
    texto = texto.strip().strip(';').strip()
    metade = len(texto) // 2
    if len(texto) > 20 and texto[:metade] == texto[metade:]:
        return texto[:metade].strip()
    return texto

def processar_json_disciplinas(json_bruto: dict) -> str:
    """
    Processa um JSON de entrada, extraindo, limpando e formatando
    informações de disciplinas. Versão 4, com correção de SyntaxError em f-string.
    """
    try:
        # 1. Decodificação segura do JSON interno
        answer_str = json_bruto['data']['answer']
        answer_data = ast.literal_eval(answer_str)
        content_str = answer_data['content']['0']

        # 2. Separa a introdução da lista de disciplinas
        partes = re.split(r'1\.\s', content_str, maxsplit=1)
        if len(partes) < 2:
            return "Formato de conteúdo inesperado: não foi possível encontrar a lista numerada."
        
        introducao = partes[0].replace('\\n', ' ').strip()
        lista_str = "1. " + partes[1]

        # 3. Divide o texto em uma entrada para cada disciplina
        itens_disciplina = re.split(r'\d+\.\s', lista_str)
        
        disciplinas_formatadas = []
        codigos_vistos = set()

        # 4. Itera sobre cada disciplina encontrada
        for item in itens_disciplina:
            item = item.replace('\\n', ' ').replace('\n', ' ').strip()
            if not item:
                continue
            
            # 5. Regex corrigidas para parar a captura antes do próximo rótulo
            disciplina_match = re.search(r'\*?\*?Disciplina:\*?\*?\s(.*?)(?=\*?\*?Codigo:|\*?\*?Unidade|\*?\*?Ementa:|\Z)', item)
            codigo_match = re.search(r'\*?\*?Codigo:\*?\*?\s(.*?)(?=\*?\*?Unidade|\*?\*?Ementa:|\Z)', item)
            unidade_match = re.search(r'\*?\*?Unidade respons[aá]vel:\*?\*?\s(.*?)(?=\*?\*?Ementa:|\Z)', item)
            ementa_match = re.search(r'\*?\*?Ementa:\*?\*?\s(.*)', item)
            
            if not disciplina_match or not codigo_match:
                continue

            codigo = limpar_texto_duplicado(codigo_match.group(1))
            
            if codigo in codigos_vistos:
                continue
            codigos_vistos.add(codigo)

            # 7. Limpa e extrai os dados
            disciplina = limpar_texto_duplicado(disciplina_match.group(1))
            unidade = limpar_texto_duplicado(unidade_match.group(1)) if unidade_match else "Não informada"
            ementa = limpar_texto_duplicado(ementa_match.group(1)) if ementa_match else "Não informada"
            
            # 8. Monta a saída formatada em Markdown
            disciplina_formatada = (
                f"### {disciplina}\n\n"
                f"**Código:** {codigo}\n\n"
                f"**Unidade Responsável:** {unidade}\n\n"
                f"**Ementa:** {ementa}\n\n"
            )
            disciplinas_formatadas.append(disciplina_formatada)

        # 9. Junta tudo na saída final
        output_final = f"## {introducao}\n\n"
        output_final += "\n\n---\n\n".join(disciplinas_formatadas)

        # Adiciona a conclusão se ela existir no final do texto
        conclusao_match = re.search(r'(\n\n| {2,})([A-Z][a-z].*?para a sua busca!.*)', content_str, re.DOTALL)
        if not conclusao_match:
             conclusao_match = re.search(r'(\n\n| {2,})(Essas turmas foram selecionadas.*)', content_str, re.DOTALL)

        if conclusao_match:
            # --- CORREÇÃO DO SYNTAX ERROR ---
            # 1. Primeiro, limpa o texto e guarda em uma variável
            texto_conclusao = conclusao_match.group(2).replace('\\n', ' ').strip()
            # 2. Depois, usa a variável limpa na f-string
            output_final += f"\n\n---\n\n_{texto_conclusao}_"
            
        return output_final

    except (ValueError, KeyError, IndexError, SyntaxError) as e:
        return f"Erro ao processar o JSON: {e}. Verifique se o formato do JSON de entrada está correto."


# Exemplo 1 que estava causando o problema de duplicação
json_teste = {'code': 0, 'data': {'answer': '{\'content\': {\'0\': \'Aqui está a lista das turmas mais relevantes e únicas:\\n\\n1. \\nDisciplina: LABORATORIO DE REDES; Codigo: ENE0011; Unidade responsavel: DEPTO ENGENHARIA ELETRICA; Ementa: Introducao aos Equipamentos de Rede, Analisadores de Protocolos, IP e Inter-Rede, Roteamento RIP, Roteamento OSPF, Roteamento BGP, IP Multicasting, Camada de Transel: DEPTO ENGENHARIA ELETRICA; Ementa: Introducao aos Equipamentos de Rede, Analisadores de Protocolos, IP e Inter-Rede, Roteamento RIP, Roteamento OSPF, Roteamento BGP, IP Multicasting, Camada de Transporte, Programacao com API Socket e Camada de Aplicacao.\\n\\n2. \\nDisciplina: SISTEMAS OPERACIONAIS DE REDES; Codigo: ENE0091; Unidade responsavel: DEPTO ENGENHARIA ELETRICA; Ementa: Nocoes de sistemaporte, Programacao com API Socket e Camada de Aplicacao.\\n\\n2. \\nDisciplina: SISTEMAS OPERACIONAIS DE REDES; Codigo: ENE0091; Unidade responsavel: DEPTO ENGENHARIA ELETRICA; Ementa: Nocoes de sistema operacional Sistema multitarefa Gestao de entrada/saida Gestao de memoria Gestao de discos e arquivos Sistemas Operacionais Distribuidos Estrutura e Operacao de Sistemas Operacionais Modernos\\n\\n3. \\nDisciplina: TELEINFORMATICA E REDES 2; Codigo: CIC0236; Unidade responsavel: DEPTO CIENCIAS DA COMPUTACAO; Ementa: Camada de Rede TCP/IP: internetworking, enderecamento, roteamento, protocolos. Camada operacional Sistema multitarefa Gestao de entrada/saida Gestao de memoria Gestao de discos e arquivos Sistemas Operacionais Distribuidos Estrutura e Operacao de Sistemas Operacionais Modernos\\n\\n3. \\nDisciplina: TELEINFORMATICA E REDES 2; Codigo: CIC0236; Unidade responsavel: DEPTO CIENCIAS DA COMPUTACAO; Ementa: Camada de Rede TCP/IP: internetworking, enderecamento, roteamento, protocolos. Camada de Aplicacao: conceitos e protocolos. Aspectos de seguranca em redes de computadores. Dispositivos de interconexao, conceito de processadores de redes. Protocolos leves. Metodos formais para especifica de Aplicacao: conceitos e protocolos. Aspectos de seguranca em redes de computadores. Dispositivos de interconexao, conceito de processadores de redes. Protocolos leves. Metodos formais para especificacao e verificacao de protocolos. Introducao a gerencia de redes.\\n\\n4. \\nDisciplina: TELEINFORMATICA E REDES 1; Codigo: CIC0235; Unidade responsavel: DEPTO CIENCIAS DA COMPUTACAO; Ementa: Introducao cao e verificacao de protocolos. Introducao a gerencia de redes.\\n\\n4. \\nDisciplina: TELEINFORMATICA E REDES 1; Codigo: CIC0235; Unidade responsavel: DEPTO CIENCIAS DA COMPUTACAO; Ementa: Introducao : arquitetura de redes, modelo de protocolo em camadas, sistemas multimidia de redes, computacao distribuida, paradigmas cliente-servidor, peer-to-peer, conceitos de computacao movel, padroes de redes. : arquitetura de redes, modelo de protocolo em camadas, sistemas multimidia de redes, computacao distribuida, paradigmas cliente-servidor, peer-to-peer, conceitos de computacao movel, padroes de redes. Capacidade de canal. Taxa de transmissao. Codificacao analogica-digital, digital-digital e digital-analogica. Principios dos modelos das redes de computadores: OSI e TCP/IP. Meios de transmissao de dadoCapacidade de canal. Taxa de transmissao. Codificacao analogica-digital, digital-digital e digital-analogica. Principios dos modelos das redes de computadores: OSI e TCP/IP. Meios de transmissao de dados. Protocolos e tecnologias de enlace de dados. Redes de comutacao de circuito e de pacotes.\\n\\n5. \\nDisciplina: REDES DE COMPUTADORES; Codigo: CIC0124; Unidade responsavel: DEPTO CIENCIAS DA COMPUTACAO; Ementa: Nocoes basicas de transmissao de dados: tipos de enlace, codigos, modos e meios de transmissao. Redes de compuiplina que você está procurando, considerando palavras-chave como "rede", "protocolo", "sistema operacional" e "teleinformatica".\'}, \'component_id\': {\'0\': \'Generate:RareGhostsCry\'}}', 'id': '1573eaee-b111-4ced-9587-c94184ab08c9', 'param': [{'key': 'materia', 'name': 'materia', 'optional': False, 'type': 'paragraph', 'value': 'REDES'}], 'reference': {}, 'session_id': '69a0eaee492c11f0a922d2b4a831cbca'}}

# --- Para testar, você pode colocar qualquer um dos seus exemplos aqui ---
# Exemplo 2 (com Markdown e ponto e vírgula)
#json_teste = {'code': 0, 'data': {'answer': "{'content': {'0': 'Aqui estão as turmas mais relevantes e únicas da base de conhecimento, com base no conteúdo da disciplina que você está procurando:\\n\\n1. **Disciplina:** LABORATORIO DE REDES; \\n**Codigo:** ENE0011;\\n**Unidade responsável:** DEPTO ENGENHARIA ELETRICA;\\n**Ementa:** Introducao aos Equipamentos de Rede, Analisadores de Protocolos, IP e Inter-Rede, Roteamento RIP, Roteamento OSPF, Roteamento BGP, IP Multicasting, Camada de Transporte, Programacao com API Socket e Camada de Aplicacao.\\nocurando:\\n\\n1. **Disciplina:** LABORATORIO DE REDES; \\n**Codigo:** ENE0011;\\n**Unidade responsável:** DEPTO ENGENHARIA ELETRICA;\\n**Ementa:** Introducao aos Equipamentos de Rede, Analisadores de Protocolos, IP e Inter-Rede, Roteamento RIP, Roteamento OSPF, Roteamento BGP, IP Multicasting, Camada de Transporte, Programacao com API Socket e Camada de Aplicacao.\\n\\n2. **Disciplina:** SISTEMAS OPERACIONAIS DE REDES; \\n**Codigo:** ENE0091;\\n**Unidade responsável:** DEPTO ENGENHARIA ELETRICA;\\n**Ementa:** Nocoes de sistema operacional Sistema m\\n2. **Disciplina:** SISTEMAS OPERACIONAIS DE REDES; \\n**Codigo:** ENE0091;\\n**Unidade responsável:** DEPTO ENGENHARIA ELETRICA;\\n**Ementa:** Nocoes de sistema operacional Sistema multitarefa Gestao de entrada/saida Gestao de memoria Gestao de discos e arquivos Sistemas Operacionais Distribuidos Estrutura e Operacao de Sistemas Operacionais Modernos\\n\\n3. **Discultitarefa Gestao de entrada/saida Gestao de memoria Gestao de discos e arquivos Sistemas Operacionais Distribuidos Estrutura e Operacao de Sistemas Operacionais Modernos\\n\\n3. **Disciplina:** TELEINFORMATICA E REDES 2; \\n**Codigo:** CIC0236;\\n**Unidade responsável:** DEPTO CIENCIAS DA COMPUTACAO;\\n**Ementa:** Camada de Rede TCP/IP: internetworking, enderecamento, roteamento, protocolos. Camada de Aplicacao: conceitos e protocolos. Aspectos de seguranca em redes de computadores. Dispositivos de interconexao, conceito de processadores de redes. , roteamento, protocolos. Camada de Aplicacao: conceitos e protocolos. Aspectos de seguranca em redes de computadores. Dispositivos de interconexao, conceito de processadores de redes. Protocolos leves. Metodos formais para especificacao e verificacao de protocolos. Introducao a gerencia de redes.\\n\\n4. **Disciplina:** TELEINFORMATICA E REDES 1; \\n**Codigo:** CIC0235;\\n**Unidade responsável:** DEPTO CIENCIAS DA COMPUTACAO;\\n**Ementa:** Introducao : arquitetura de redes, modelo de protocolo em camadas, sistemas multimidia de redes, computacao distribuida, paradigmas cliente-servidor, peer-to-peer, conceitos de computacao movel, padroes de redes. Capacidade de canal. Taxa de transmissao. Codificacao analogica-digital, digital-digital e digital-analogica. Principios dos modelos das redes de computadores: OSI e TCP/IP. Meios de transmissao de dados. Protocolos e tecnologias de enlace de dados. Redes de comutacao de circuito e de pacotes.\\n\\n5. **Disciplina:** REDES DE COMPUTADORES; \\n**Codigo:** CIC0124;\\n**Unidade responsável:** DEPTO CIENCIAS DA COMPUTACAO;\\n**Ementa:** Nocoes basicas de transmissao de dados: tipos de enlace, codigos, modos e meios de transmissao. Redes de computadores: locais, metropolitanas e de longa distancia. Terminologia e aplicacoes, topologias, modelos de arquitetura (OSI/ISO e TCP/IP) e protocolos. Interconexao de redes. Nivel de transporte.\\n\\nEssas são as turmas mais relevantes para a sua busca!'}, 'component_id': {'0': 'Generate:RareGhostsCry'}}", 'id': '810a6e32-e043-4de6-842f-5ebe9ef74e31', 'param': [{'key': 'materia', 'name': 'materia', 'optional': False, 'type': 'paragraph', 'value': 'REDES'}], 'reference': {}, 'session_id': 'de93e200494c11f08b3eaafb12d8ef67'}}

#json_teste = {'code': 0, 'data': {'answer': "{'content': {'0': 'Aqui está a lista de turmas mais relevantes e únicas:\\n\\n1. \\nDisciplina: DIREITO PROCESSUAL PENAL 2\\nCodigo: FDD0051\\nUnidade responsável: FACULDADE DE DIREITO\\nEmenta: OBJETIVA A DISCIPLINA DAR CONHECIMENTO AOS ALUNOS DA EATRUTU- RA E DINAMICIDADE DO PROCESSO PENAL BRASILEIRO, COM O DETALHAMENTO DE SEUS CONCEITOS FUNDAMENTAIS, CAPACITANDO-OS PARA A COMPREENSAO DA PROBLEMATICA TEORICA-DOUTRINARIA QUE ENVOLVE O ESTUDO DA MATERIA, BEM CO-MO SEUS REFLEXOS DE ORDEM PRATICA, NOTADAMENTE SEU ASPECTO INSTRUMENTAL. CUMULANDO A CONCEPCAO DO DIREITO PROCESSUAL PENAL COMO SISTEMA-A LHES ORDENAR O PENSAMNETO - COMA REFLEXAO CRITICA DA REALIDADE, PRE- TENDESE ESTIMULAR OS ALUNOS PARA A ESPECULACAO CIENTIFICA E DESENVOLVER-LHES O ANIMO CRIADO, ASSIM REJUVENESCENDO A CULTURA E HABILITANDO-OS PARA O DESEMPENHO ADEQUADO DE SUAS FUNCOES PROFISSIONAIS.\\n\\n2. \\nDisciplina: DIREITO PROCESSUAL PENAL 1\\nCodigo: FDD0049\\nUnidade responsável: FACULDADE DE DIREITO\\nEmenta: OBJETIVA A DISCIPLINA DAR CONHECIMENTO AOS ALUNOS DA ESTRUTURA E DINAMICIDADE DO PROCESSO PENAL BRASILEIRO, COM O DETALHAMENTO DE SEUS CONCEITOS FUNDAMENTAIS, CAPACITANDO-OS PARA A COMPREESAO DA PROBLEMATICA TEORICA-DOUTRINARIA QUE ENVOLVE O ESTUDO DA MATERIA, BEM CO-MO SEUS REFLEXOS DE ORDEM PRATICA, NOTADAMENTE SEU ASPECTO INSTRUMENTAL. CUMULANDO A CONCEPCAO DO DIREITO PROCESSUAL PENAL COMO SISTEMA-A LHES ORDENAR O PENSAMNETO - COM A REFLEXOA CRITICA DA REALIDADE PRE- TENDESE ESTIMULAR OS ALUNOS PARA A ESPECULACAO CIENTIFICA E DESENVOLVER-LHES O ANIMO CRIADO, ASSIM REJUVENESCENDO A CULTURA E HABILITANDO-OS PARA O DESEMPENHO ADEQUADO DE SUAS FUNCOES PROFISSIONAIS.\\n\\n3. \\nDisciplina: DIREITO PENAL 1\\nCodigo: FDD0039\\nUnidade responsável: FACULDADE DE DIREITO\\nEmenta: OBJETIVA A DISCIPLINA INICIAR O ESTUDO DOS TIPOS LEGAIS DEFINIDOS EM FUNCAO DE BENS JURIDICOS ELENCADOS NA PARTE ESPECIAL, QUESTIO-NANDO A SISTEMATIZACAO VIGENTE DIANTE DA MACROCRIMINALIDADE. ULTRAPAS-SANDO A META DE DESCRICAO , PRETENDE, SOBRETUDO CAPACIATR O ALUNO A PERCEBER COMO SE DA ADAPTACAO DS NORMAS A REALIDADE PELOS OPERADORES DO DIREITO.\\n\\n4. \\nDisciplina: DIREITO PENAL 2\\nCodigo: FDD0041\\nUnidade responsável: FACULDADE DE DIREITO\\nEmenta: OBJETIVA A DISCIPLINA PROSSEGUIR NO ESTUDO DOS TIPOS LEGAIS DEFINIDOS EM FUNCAO DE BENS JURIDICOS ELENCADOS NA PARTE ESPECIAL, BEM COMO NA LEGISLACAO ESPECIAL, QUESTIONANDO A SISTEMATIZACAO VIGENTE DA MACROCRIMINALIDADE. ULTRAPASSANDO A MERA DESCRICAO PRETENDE, SOBRETU- DO, CAPACITAR O ALUNO A PERCEBER COMO SE DA A ADAPTACAO DAS NORMAS A REALIDADE, ATRAVES DA INTERPRETACAO DOS OPERADORES DO DIREITO.'}, 'component_id': {'0': 'Generate:RareGhostsCry'}}", 'id': 'afb67402-e4d8-474d-a450-67a51f00d8f5', 'param': [{'key': 'materia', 'name': 'materia', 'optional': False, 'type': 'paragraph', 'value': 'DIREITO PENAL'}], 'reference': {}, 'session_id': '07ffeb0c494d11f094a0aafb12d8ef67'}}

#json_teste = {'code': 0, 'data': {'answer': "{'content': {'0': 'Aqui estão as turmas mais relevantes e únicas encontradas na base de conhecimento:\\n\\n1. \\nDisciplina: HISTOLOGIA BASICA\\nCodigo: GEM0041\\nUnidade responsável: INSTITUTO DE CIENCIAS BIOLOGICAS\\nEmenta: Estudo morfofisiologico dos tecidos epiteliais, conjuntivos propriamente dito, cartilaginoso, osseo, musculares e nervoso. Estudo descritivo da anatomia microscopica com enfase nas relacoes histofisiologicas dos sistemas: cardiovascular, sangue, imunitario, digestivo, respiratorio, urinario, endocrino e reprodutores.\\n\\n2. \\nDisciplina: BIOLOGIA ESTRUTURAL DOS TECIDOS\\nCodigo: GEM0062\\nUnidade responsável: INSTITUTO DE CIENCIAS BIOLOGICAS\\nEmenta: Estudo Teorico e pratico em histologia de tecidos animais e suas especializacoes atraves de leitura atualizada e analises microscopias. Utilizacao de caracteristicas microscopicas e conhecimentos teoricos para diagnose e estudos morfofuncionais de tecidos.\\n\\n3. \\nDisciplina: HISTOLOGIA VETERINARIA\\nCodigo: GEM0042\\nUnidade responsável: INSTITUTO DE CIENCIAS BIOLOGICAS\\nEmenta: Estudo morfofisiologico dos tecidos epiteliais, conjuntivo propriamente dito, cartilaginoso, osseo, musculares e nervoso.Estudo descritivo da anatomia microscopica dos seguintes sistemas de animais domesticos: cardiovascular, sangue, imunitario, digestorio, tegumentar, urinario, respiratorio e reprodutores.\\n\\n4. \\nDisciplina: BIOLOGIA ESTRUTURAL DOS SISTEMAS\\nCodigo: GEM0059\\nUnidade responsável: INSTITUTO DE CIENCIAS BIOLOGICAS\\nEmenta: Estudo teorico e pratico em morfologia e histologia de sistemas em animais atraves de literatura especializada e observacoes microscopicas. Utilizacao de caracteristicas microscopicas e conhecimentos teoricos para diagnose e estudos morfofuncionais de orgaos.\\n\\nNão foram encontradas turmas relevantes que sejam únicas, pois todas as turmas encontradas compartilham a mesma unidade responsável (INSTITUTO DE CIENCIAS BIOLOGICAS).'}, 'component_id': {'0': 'Generate:RareGhostsCry'}}", 'id': 'd62abee3-0cba-4832-acb8-c67b3f1aea41', 'param': [{'key': 'materia', 'name': 'materia', 'optional': False, 'type': 'paragraph', 'value': 'HISTOLOGIA'}], 'reference': {}, 'session_id': '1b2c6dfe494d11f0b685aafb12d8ef67'}}

#json_teste = {'code': 0, 'data': {'answer': "{'content': {'0': 'Aqui está a lista de turmas mais relevantes e únicas:\\n\\n1. Disciplina: FISIOTERAPIA RESPIRATORIA; Codigo: FCE0722; Unidade responsável: CAMPUS UNB CEILANDIA: FACULDADE DE CIENCIAS E TECNOLOGIAS EM SAUDE; Ementa: Conceituar, apresentar e discutir as bases morfologicas e fisiologicas do sistema respiratorio aplicada a fisioterapia respiratoria.; Metodos de investigacao da funcao pulmonar e sua interpretacao.; Discussao dos recursos terapeuticos e de intervencao nos disturbios ventilatorade responsável: CAMPUS UNB CEILANDIA: FACULDADE DE CIENCIAS E TECNOLOGIAS EM SAUDE; Ementa: Conceituar, apresentar e discutir as bases morfologicas e fisiologicas do sistema respiratorio aplicada a fisioterapia respiratoria.; Metodos de investigacao da funcao pulmonar e sua interpretacao.; Discussao dos recursos terapeuticos e de intervencao nos disturbios ventilatorios restritivos, obstrutivos e combinado.; Apresentar e discutir a abordagem da fisioterapia respiratoria nos niveis de atencao a saude, incluindo a reabilitacao pulmonar.; Apresentacao e discussao de casos clinicos baseado nas evidencias cientificas.; Objetivos: Proporcionar aquisicao de competencias e habilidades baseadas nas evidencias cientificas da fisioterapia rios restritivos, obstrutivos e combinado.; Apresentar e discutir a abordagem da fisioterapia respiratoria nos niveis de atencao a saude, incluindo a reabilitacao pulmonar.; Apresentacao e discussao de casos clinicos baseado nas evidencias cientificas.; Objetivos: Proporcionar aquisicao de competencias e habilidades baseadas nas evidencias cientificas da fisioterapia respiratoria.; A partir das discussoes clinicas desenvolver o raciocinio clinico e analise critica da fisioterapia respiratoria.\\n\\n2. Disciplina: SISTEMAS DE MANUTENCAO DA VIDA; Codigo: FCE0264; Unidade responsável: CAMPUS UNB CEILANDIA: FACULDADE DE CIENCIAS E TECNOLOGIAS EM SAUDE; Ementa: Aspectos anatomicos, histologicos e fisiologicos dos sistemas cardiovascularespiratoria.; A partir das discussoes clinicas desenvolver o raciocinio clinico e analise critica da fisioterapia respiratoria.\\n\\n2. Disciplina: SISTEMAS DE MANUTENCAO DA VIDA; Codigo: FCE0264; Unidade responsável: CAMPUS UNB CEILANDIA: FACULDADE DE CIENCIAS E TECNOLOGIAS EM SAUDE; Ementa: Aspectos anatomicos, histologicos e fisiologicos dos sistemas cardiovascular, urinario e respiratorio. Correlacao dos tres sistemas para regulacao da pressao arterial e do pH\\n\\n3. Disciplina: ELEMENTOS DE FISIOLOGIA 2; Codigo: CFS0039; Unidade responsável: I, urinario e respiratorio. Correlacao dos tres sistemas para regulacao da pressao arterial e do pH\\n\\n3. Disciplina: ELEMENTOS DE FISIOLOGIA 2; Codigo: CFS0039; Unidade responsável: INSTITUTO DE CIENCIAS BIOLOGICAS; Ementa: A DISCIPLINA ABORDARA ASPECTOS DA FISIOLOGIA HUMANA REFERENTES AOS SISTEMAS CARDIOVASCULAR, RESPIRATORIO, DIGESTORIO E EXCRETOR.\\n\\n4. DisciplNSTITUTO DE CIENCIAS BIOLOGICAS; Ementa: A DISCIPLINA ABORDARA ASPECTOS DA FISIOLOGIA HUMANA REFERENTES AOS SISTEMAS CARDIOVASCULAR, RESPIRATORIO, DIGESTORIO E EXCRETOR.\\n\\n4. Disciplina: MORFOFISIOLOGIA COMPARADA; Codigo: FUP0255; Unidade responsável: FACULDADE DE PLANALTINA; Ementa: Estudo integrado e comparativo dos conceitos morfologicos e fisiologicos fundamentina: MORFOFISIOLOGIA COMPARADA; Codigo: FUP0255; Unidade responsável: FACULDADE DE PLANALTINA; Ementa: Estudo integrado e comparativo dos conceitos morfologicos e fisiologicos fundamentais dos sistemas organicos dos vertebrados, inclusive do ser humano. Organizacao morfofuncional comparativa dos sistemas circulatorio, respiratorio, digestorio, excretor, neuro-endocrino, sensorial , locomotor e reprodutor.\\n\\nEssas turmas são as mais relevantes para a disciplina de Fisiologia Respiratória.'}, 'component_id': {'0': 'Generate:RareGhostsCry'}}", 'id': '0e8a746d-da01-4b2c-b45c-96cb21b75a3d', 'param': [{'key': 'materia', 'name': 'materia', 'optional': False, 'type': 'paragraph', 'value': 'SISTEMA RESPIRATORIO'}], 'reference': {}, 'session_id': 'd1f4e432494b11f09b26de9835c04579'}}

#json_teste = {'code': 0, 'data': {'answer': '{\'content\': {\'0\': \'Aqui estão as turmas mais relevantes e únicas encontradas na base de conhecimento:\\n\\n1. **Disciplina:** FUNDAMENTOS DE SISTEMAS EMBARCADOS\\n**Codigo:** FGA0109\\n**Unidade responsável:** CAMPUS UNB GAMA: FACULDADE DE CIENCIAS E TECNOLOGIAS EM ENGENHARIA\\n**Ementa:** Definicoes e aplicacoes.Metodologias de desenvolvimento de sistemas embarcados.Interfaceamento analogico e digital (Protocolos de Comunicacao).Desenvolvimento de drivers e firmware.Sistemas em Tempo Real.\\n\\n2. **Disciplina:** SISTEMAS OPERACIONAIS EMBARCADOS\\n**Codigo:** FGA0309\\n**Unidade responsável:** CAMPUS UNB GAMA: FACULDADE DE CIENCIAS E TECNOLOGIAS EM ENGENHARIA\\n**Ementa:** 1 - Definicoes e aplicacoes.; 2 - Metodologias de desenvolvimento de sistemas embarcados.; 3 - Desenvolvimento de firmware.; 4 - Estado da arte em sistemas embarcados e em tempo real.; 5 - Arquiteturade microcontroladores.; 6 - Interfaceamento analogico e digital.; 7 - Laboratorios.\\n\\n3. **Disciplina:** PROJETO COM CIRCUITOS RECONFIGURAVEIS\\n**Codigo:** FGA0198\\n**Unidade responsável:** CAMPUS UNB GAMA: FACULDADE DE CIENCIAS E TECNOLOGIAS EM ENGENHARIA\\n**Ementa:** Etapas do Projeto com Dispositivos Logicos Programaveis, Comparacao entre ASICs, FPGAs e Microprocessadores, Arquitetura Interna de um FPGA (Blocos Basicos, Estrutura de Roteamento), Simulacao Funcional, Sintese Logica para FPGAs, Algoritmos de Mapeamento e Roteamento, Conceito de Timming, Estimacao de Desempenho, Uso de Blocos de Propriedade Intelectual, Co-projeto Hardware-Software, Conceitos de System on Chip, Projeto de Sistemas Embarcados com FPGAs, Tolerancia a Falhas usando FPGAs, Reconfiguracao Dinamica Parcial.\\n\\n4. **Disciplina:** INTRODUCAO AOS SISTEMAS EMBARCADOS\\n**Codigo:** CIC0130\\n**Unidade responsável:** DEPTO CIENCIAS DA COMPUTACAO\\n**Ementa:** CIRCUITOS ESPECIALIZADOS: ARQUITETURA E PROGRAMACAO. BARRAMENTOS PARALELOS E SERIAIS COMUNICACOES ASSICRONAS. APLICACOES.\\n\\n5. **Disciplina:** SISTEMAS DE TEMPO REAL\\n**Codigo:** CIC0248\\n**Unidade responsável:** DEPTO CIENCIAS DA COMPUTACAO\\n**Ementa:** Introducao. Caracteristicas de sistemas em tempo real. Aspectos funcionais e temporais. Modelo de programa cao sincrona. Abordagens Assincrona e Sincrona. Concorrencia. Comunicacao e sincronizacao de processos. Sistemas Embarcados. Algoritmos de escalonamento de processos para sistemas em tempo real embarcados. Modelagem de sistemas em tempo real. Sistemas Operacionais de tempo real. Linguagens de programacao para sistemas em tempo real. Projeto pratico de sistema de tempo real embarcados.\\n\\nEssas turmas foram selecionadas com base na relevância e unicidade do conteúdo, considerando apenas as palavras-chave "FUNDAMENTOS DE SISTEMAS EMBARCADOS", "SISTEMAS OPERACIONAIS EMBARCADOS" e "PROJETO COM CIRCUITOS RECONFIGURAVEIS".\'}, \'component_id\': {\'0\': \'Generate:RareGhostsCry\'}}', 'id': '30dc9dba-663b-465f-9f27-6a9fda25ec9e', 'param': [{'key': 'materia', 'name': 'materia', 'optional': False, 'type': 'paragraph', 'value': 'SISTEMAS EMBARCADOS'}], 'reference': {}, 'session_id': 'a5c4a8bc494f11f0b502aafb12d8ef67'}}

#json_teste = {'code': 0, 'data': {'answer': '{\'content\': {\'0\': \'Aqui está a lista com as turmas mais relevantes e únicas:\\n\\n1. \\nDisciplina: LABORATORIO DE REDES; Codigo: ENE0011; Unidade responsavel: DEPTO ENGENHARIA ELETRICA; Ementa: Introducao aos Equipamentos de Rede, Analisadores de Protocolos, IP e Inter-Rede, Roteamento RIP, Roteamento OSPF, Roteamento BGP, IP Multicasting, Camada de Transporte, Programacao com API Socket e Camada de Aplicacao.\\n\\n2. \\nDisciplina: SISTEMAS OPERACIONAIS DE REDES; Codigo: ENE0091; Unidade responsavel: DEPTO ENGENHARIA ELETRICA; Ementa: Nocoes de sistema operacional Sistema multitarefa Gestao de entrada/saida Gestao de memoria Gestao de discos e arquivos Sistemas Operacionais Distribuidos Estrutura e Operacao de Sistemas Operacionais Modernos\\n\\n3. \\nDisciplina: TELEINFORMATICA E REDES 2; Codigo: CIC0236; Unidade responsavel: DEPTO CIENCIAS DA COMPUTACAO; Ementa: Camada de Rede TCP/IP: internetworking, enderecamento, roteamento, protocolos. Camada de Aplicacao: conceitos e protocolos. Aspectos de seguranca em redes de computadores. Dispositivos de interconexao, conceito de processadores de redes. Protocolos leves. Metodos formais para especificacao e verificacao de protocolos. Introducao a gerencia de redes.\\n\\n4. \\nDisciplina: TELEINFORMATICA E REDES 1; Codigo: CIC0235; Unidade responsavel: DEPTO CIENCIAS DA COMPUTACAO; Ementa: Introducao : arquitetura de redes, modelo de protocolo em camadas, sistemas multimidia de redes, computacao distribuida, paradigmas cliente-servidor, peer-to-peer, conceitos de computacao movel, padroes de redes. Capacidade de canal. Taxa de transmissao. Codificacao analogica-digital, digital-digital e digital-analogica. Principios dos modelos das redes de computadores: OSI e TCP/IP. Meios de transmissao de dados. Protocolos e tecnologias de enlace de dados. Redes de comutacao de circuito e de pacotes.\\n\\n5. \\nDisciplina: REDES DE COMPUTADORES; Codigo: CIC0124; Unidade responsavel: DEPTO CIENCIAS DA COMPUTACAO; Ementa: Nocoes basicas de transmissao de dados: tipos de enlace, codigos, modos e meios de transmissao. Redes de computadores: locais, metropolitanas e de longa distancia. Terminologia e aplicacoes, topologias, modelos de arquitetura (OSI/ISO e TCP/IP) e protocolos. Interconexao de redes. Nivel de transporte.\\n\\nEssas turmas foram selecionadas com base no conteúdo da disciplina que você procurou, considerando palavras-chave como "rede", "computador", "protocolo" e "sistema operacional".\'}, \'component_id\': {\'0\': \'Generate:RareGhostsCry\'}}', 'id': '9ef261ff-42ab-45f2-8b64-325906440783', 'param': [{'key': 'materia', 'name': 'materia', 'optional': False, 'type': 'paragraph', 'value': 'REDES'}], 'reference': {}, 'session_id': '90174b3a495111f093a5aafb12d8ef67'}}

#json_teste = {'code': 0, 'data': {'answer': '{\'content\': {\'0\': \'Aqui está a lista das turmas mais relevantes e únicas:\\n\\n1. \\nDisciplina: LABORATORIO DE REDES; Codigo: ENE0011; Unidade responsavel: DEPTO ENGENHARIA ELETRICA; Ementa: Introducao aos Equipamentos de Rede, Analisadores de Protocolos, IP e Inter-Rede, Roteamento RIP, Roteamento OSPF, Roteamento BGP, IP Multicasting, Camada de Transel: DEPTO ENGENHARIA ELETRICA; Ementa: Introducao aos Equipamentos de Rede, Analisadores de Protocolos, IP e Inter-Rede, Roteamento RIP, Roteamento OSPF, Roteamento BGP, IP Multicasting, Camada de Transporte, Programacao com API Socket e Camada de Aplicacao.\\n\\n2. \\nDisciplina: SISTEMAS OPERACIONAIS DE REDES; Codigo: ENE0091; Unidade responsavel: DEPTO ENGENHARIA ELETRICA; Ementa: Nocoes de sistemaporte, Programacao com API Socket e Camada de Aplicacao.\\n\\n2. \\nDisciplina: SISTEMAS OPERACIONAIS DE REDES; Codigo: ENE0091; Unidade responsavel: DEPTO ENGENHARIA ELETRICA; Ementa: Nocoes de sistema operacional Sistema multitarefa Gestao de entrada/saida Gestao de memoria Gestao de discos e arquivos Sistemas Operacionais Distribuidos Estrutura e Operacao de Sistemas Operacionais Modernos\\n\\n3. \\nDisciplina: TELEINFORMATICA E REDES 2; Codigo: CIC0236; Unidade responsavel: DEPTO CIENCIAS DA COMPUTACAO; Ementa: Camada de Rede TCP/IP: internetworking, enderecamento, roteamento, protocolos. Camada operacional Sistema multitarefa Gestao de entrada/saida Gestao de memoria Gestao de discos e arquivos Sistemas Operacionais Distribuidos Estrutura e Operacao de Sistemas Operacionais Modernos\\n\\n3. \\nDisciplina: TELEINFORMATICA E REDES 2; Codigo: CIC0236; Unidade responsavel: DEPTO CIENCIAS DA COMPUTACAO; Ementa: Camada de Rede TCP/IP: internetworking, enderecamento, roteamento, protocolos. Camada de Aplicacao: conceitos e protocolos. Aspectos de seguranca em redes de computadores. Dispositivos de interconexao, conceito de processadores de redes. Protocolos leves. Metodos formais para especifica de Aplicacao: conceitos e protocolos. Aspectos de seguranca em redes de computadores. Dispositivos de interconexao, conceito de processadores de redes. Protocolos leves. Metodos formais para especificacao e verificacao de protocolos. Introducao a gerencia de redes.\\n\\n4. \\nDisciplina: TELEINFORMATICA E REDES 1; Codigo: CIC0235; Unidade responsavel: DEPTO CIENCIAS DA COMPUTACAO; Ementa: Introducao cao e verificacao de protocolos. Introducao a gerencia de redes.\\n\\n4. \\nDisciplina: TELEINFORMATICA E REDES 1; Codigo: CIC0235; Unidade responsavel: DEPTO CIENCIAS DA COMPUTACAO; Ementa: Introducao : arquitetura de redes, modelo de protocolo em camadas, sistemas multimidia de redes, computacao distribuida, paradigmas cliente-servidor, peer-to-peer, conceitos de computacao movel, padroes de redes. : arquitetura de redes, modelo de protocolo em camadas, sistemas multimidia de redes, computacao distribuida, paradigmas cliente-servidor, peer-to-peer, conceitos de computacao movel, padroes de redes. Capacidade de canal. Taxa de transmissao. Codificacao analogica-digital, digital-digital e digital-analogica. Principios dos modelos das redes de computadores: OSI e TCP/IP. Meios de transmissao de dadoCapacidade de canal. Taxa de transmissao. Codificacao analogica-digital, digital-digital e digital-analogica. Principios dos modelos das redes de computadores: OSI e TCP/IP. Meios de transmissao de dados. Protocolos e tecnologias de enlace de dados. Redes de comutacao de circuito e de pacotes.\\n\\n5. \\nDisciplina: REDES DE COMPUTADORES; Codigo: CIC0124; Unidade responsavel: DEPTO CIENCIAS DA COMPUTACAO; Ementa: Nocoes basicas de transmissao de dados: tipos de enlace, codigos, modos e meios de transmissao. Redes de compuiplina que você está procurando, considerando palavras-chave como "rede", "protocolo", "sistema operacional" e "teleinformatica".\'}, \'component_id\': {\'0\': \'Generate:RareGhostsCry\'}}', 'id': '1573eaee-b111-4ced-9587-c94184ab08c9', 'param': [{'key': 'materia', 'name': 'materia', 'optional': False, 'type': 'paragraph', 'value': 'REDES'}], 'reference': {}, 'session_id': '69a0eaee492c11f0a922d2b4a831cbca'}}

# Executa a função e imprime o resultado
#resultado_legivel = processar_json_disciplinas(json_teste)
#print(resultado_legivel)